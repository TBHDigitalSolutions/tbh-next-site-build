Official Title: Service Template Data Population Patterns Guide
Domain: Web Development, Project Architecture
File Name: project-architecture_service-data-patterns_2025-09-13.md
Main Part: project-architecture
Qualifier: ServiceDataPatterns
Date: 2025-09-13

Spotlight Comments:
- Guides data population for `ServiceTemplate` using TypeScript (.ts) or JSON (.json) files with examples for Marketing Services.
- Recommends a single page data file per service for type safety and maintainability.
- Cross-references project-architecture_terminology-guide_2025-09-13.md and project-architecture_system-overview_2025-09-13.md.

Summary: The Service Template Data Population Patterns Guide offers practical instructions for structuring data for the `ServiceTemplate` component in TBH Digital Solutions' Next.js marketing website. It advocates for a single TypeScript (.ts) file per service page (e.g., `src/data/page/services-pages/marketing-services/index.ts`) for type safety, with JSON as an alternative for non-developer edits (validated with Zod), and provides a detailed example of data blocks (hero, portfolio, pricing, etc.) that the template processes to render sections dynamically.

---

Got it! Here’s the simple, practical way to think about populating your **ServiceTemplate** (and its child sections) with data—when to use **`.ts`** vs **`.json`**, and whether to use a **single page data file** or **per-section files**.

# TL;DR (what to do)

* **Use TypeScript data files (`.ts`) for service pages.**
  They’re typed, composable, refactor-friendly, and already match how your template reads data.
* **Keep one data file per page** (e.g., `/src/data/page/services-pages/marketing-services/index.ts`) that aggregates all the sections’ content for that page.
* **Only use `.json`** when content must be edited by non-devs or generated by external tools—and still validate/transform it into your typed shape before passing it into the template.

---

# Why TS over JSON for ServiceTemplate?

**ServiceTemplate** expects a single **`data` object** (shape: `ServiceTemplateData`) and adapts that object into all sections (hero, search, portfolio, pricing, FAQs, etc.). The template is already **tolerant** and will safely skip missing blocks. You just pass **one object** and it does the orchestration.&#x20;

**Benefits of `.ts` data modules:**

* **Types + editor help**: catch mistakes at build time (wrong keys, wrong shapes).
* **Comments & constants**: document content, reuse portions, import shared lists.
* **Composition**: import shared blocks (testimonials, FAQs) without duplication.
* **Refactors**: if a field gets renamed, TypeScript tells you.

**JSON is fine when**:

* Marketing/PMs maintain the content directly in a headless/editor.
* You export/generate JSON from another system.

In those cases, **parse/validate JSON into your typed shape** (e.g., with Zod) **before** passing into `ServiceTemplate`. That keeps the component code stable and safe.

---

# One data file vs per-section files?

## Recommended: **One page data file**

* Put a **single** file per page that exports a typed `ServiceTemplateData` object.
* Easier to reason about: open one file, see everything the page shows.
* Great DX: the template will automatically render only what you give it.

**Path** (you already use this pattern):

```
/src/data/page/services-pages/marketing-services/index.ts
```

## When to split per-section

* If a block is **reused across multiple pages** (e.g., a shared FAQ, shared pricing table), factor it into:

  ```
  /src/data/shared/faqs/marketing.ts
  /src/data/shared/testimonials/marketing.ts
  /src/data/shared/pricing/marketing.ts
  ```

  …then import those into the page’s `index.ts`.

---

# How the template consumes your data (plain English)

You pass `{ node, data }` to **`<ServiceTemplate />`**. Inside:

* It derives **breadcrumbs**, **siblings**, and **canonical paths** from **taxonomy**.
* It **adapts** each block from `data`:

  * `hero` → `ServiceHero`
  * `search` → `SearchBanner` (with sensible defaults)
  * `twoColVideo` → `TwoColumnSection`
  * `servicesAndCapabilitiesExpandable` → expandable list
  * `portfolio` → chooses **web**, **video**, or **demo** gallery automatically
  * `modules/resources/carousel` → case studies & resources rail
  * `pricing` → routes through a **pricing adapter** (based on hub/service)
  * `packages/addons` → growth packages section
  * `testimonials` → testimonials carousel
  * `faq/faqs` → FAQ accordion
  * `cta` → final CTA

Missing blocks are simply skipped. No crashes.&#x20;

---

# Minimal example (TS data file)

**`/src/data/page/services-pages/marketing-services/index.ts`**

```ts
import type { ServiceTemplateData } from "@/types/servicesTemplate.types";

export const data: ServiceTemplateData = {
  hero: {
    content: {
      eyebrow: "Marketing Services",
      title: "Grow demand and capture it",
      subtitle: "Paid media, content, and measurement that compounds.",
      ctas: [
        { label: "Talk to us", href: "/contact" },
        { label: "See pricing", href: "#pricing" },
      ],
    },
    media: { kind: "image", src: "/page/services-pages/marketing-services/marketing-hero-poster.jpg" }
  },

  search: {
    placeholder: "Search marketing services…",
    // optional: index/filters can be omitted
  },

  twoColVideo: {
    title: "How we work",
    body: "Strategy first, test quickly, scale what works.",
    media: { kind: "video", src: "/page/services-pages/marketing-services/marketing-process.mp4" }
  },

  servicesAndCapabilitiesExpandable: {
    title: "Services & capabilities",
    description: "Everything from paid media to measurement and martech.",
    items: [
      { title: "Digital Advertising", bullets: ["Search", "Social", "Programmatic"] },
      { title: "Content & Creative", bullets: ["Campaign concepts", "Landing pages"] },
    ]
  },

  portfolio: {
    variant: "web",
    title: "Selected Work",
    items: [
      { id: "mk-01", title: "SaaS funnel lift", image: "/page/services-pages/marketing/services/saas-funnel.jpg" },
      { id: "mk-02", title: "Local expansion", image: "/page/services-pages/marketing/local-expansion.png" }
    ]
  },

  modules: {
    title: "Resources & Case Studies",
    items: [
      { kind: "case-study", title: "Retail ROAS up 48%", href: "/portfolio/marketing-services/..." },
      { kind: "playbook", title: "B2B Attribution 101", href: "/playbooks/b2b-attribution" }
    ]
  },

  pricing: {
    title: "Marketing Pricing & Packages",
    subtitle: "Choose a plan or tailor a scope",
    tiers: [
      { id: "starter", title: "Starter", price: 2000, unit: "/mo", features: ["1 channel", "Monthly report"] },
      { id: "growth", title: "Growth", price: 6000, unit: "/mo", features: ["3 channels", "Weekly report"] }
    ],
    // optional: comparison table
    comparison: {
      columns: ["Starter", "Growth"],
      rows: [
        { feature: "Channels", values: ["1", "3"] },
        { feature: "Reporting", values: ["Monthly", "Weekly"] }
      ]
    },
    disclaimer: "Prices are starting points; final pricing after scope review."
  },

  packages: {
    featured: ["growth-campaign-pack"],
    items: [
      { id: "growth-campaign-pack", title: "Growth Campaign Pack", price: 4500 }
    ],
    cta: { label: "See all packages", href: "/packages" }
  },

  testimonials: {
    title: "What clients say",
    data: [
      { quote: "They helped us scale.", author: "Sara C.", company: "Glow Inc." }
    ]
  },

  faq: {
    title: "FAQs",
    faqs: [
      { question: "How long to see results?", answer: "2–6 weeks for early signal." }
    ]
  },

  cta: {
    title: "Ready to grow?",
    primaryCta: { label: "Book a call", href: "/book" },
    secondaryCta: { label: "See packages", href: "/packages" },
    layout: "centered"
  }
};

export default data;
```

**`/app/services/marketing-services/page.tsx`**

```tsx
import { servicesTree } from "@/data/taxonomy/servicesTree";
import ServiceTemplate from "@/templates/ServicePage/ServiceTemplate";
import data from "@/data/page/services-pages/marketing-services";

export default function Page() {
  // find the node for /services/marketing-services
  const node = (servicesTree.children ?? []).find(n => n.slug === "marketing-services")!;
  return <ServiceTemplate node={node as any} data={data} />;
}
```

> Notes:
>
> * If your file lives under `src/data/page/services-pages/marketing-services/index.ts`, you can import the **directory** path and it will resolve to `index.ts`.
> * The **template will gracefully skip** any block you omit (e.g., no `pricing` → no pricing section).&#x20;

---

# When would I choose JSON instead?

* **Non-devs** own the content and edit it elsewhere (CMS, spreadsheet export).
* The data is **generated** by another process you don’t want to rewrite in TS.

**How to wire JSON safely**

```ts
// src/data/page/services-pages/marketing-services/index.ts
import raw from "./page.data.json"; // with "resolveJsonModule": true in tsconfig
import { z } from "zod"; // or your shared zod schema

const ServiceDataSchema = z.object({
  hero: z.any(),
  // ...define/compose your shape
});

export const data = ServiceDataSchema.parse(raw);
export default data;
```

You still end up exporting a **typed** object to the template, keeping strictness and nice DX.

---

# How to pass portfolio/testimonials/pricing correctly

* **Portfolio**: set `portfolio.variant` (`"web" | "video" | "demo"`) and an `items` array. The template auto-selects the right gallery.&#x20;
* **Pricing**: pass a `pricing` block; the template calls your **pricing adapter** based on hub/service (so you don’t repeat mapping logic per page).&#x20;
* **Testimonials**: put an array at `testimonials.data`; the template handles layout.&#x20;
* **FAQs**: either `faq.faqs` or `faqs.items` (template is tolerant); it normalizes shape for the `FAQAccordion`.&#x20;

---

# Simple decision guide

* **Do you want types, imports, reuse, and refactor safety?** → **Use `.ts`** page data files.
* **Do non-devs need to edit the raw data?** → Allow `.json`, but always **validate and adapt** to the typed shape before rendering.
* **Do blocks repeat across multiple pages?** → Extract shared **TS constants** and import them into each page’s data file.
* **Do not** split every tiny block into separate files unless it’s reused; otherwise you’ll create a maintenance maze.

That’s it—keep it **one typed page data file → pass into ServiceTemplate → let adapters render only what’s present**. It’s clean, safe, and future-proof.&#x20;
