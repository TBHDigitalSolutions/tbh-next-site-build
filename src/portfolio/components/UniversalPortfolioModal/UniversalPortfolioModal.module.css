 /* ============================
   ðŸªŸ TBH Digital Solutions - Universal Portfolio Modal
   Aligned with Brand Guide & Root Variables
============================ */

 /* ============================
   ðŸŽ­ Modal Backdrop & Container
============================ */

 .modalBackdrop {
     position: fixed;
     top: 0;
     left: 0;
     right: 0;
     bottom: 0;
     background: rgba(6, 5, 18, 0.95);
     backdrop-filter: blur(12px);
     -webkit-backdrop-filter: blur(12px);
     z-index: var(--z-index-overlay);
     display: flex;
     align-items: center;
     justify-content: center;
     padding: clamp(var(--spacing-sm), 2vw, var(--spacing-md));
     opacity: 0;
     animation: backdropFadeIn var(--transition-standard) ease-out forwards;
     overflow-y: auto;
     overscroll-behavior: contain;
 }

 @keyframes backdropFadeIn {
     from {
         opacity: 0;
     }

     to {
         opacity: 1;
     }
 }

 .modalContainer {
     position: relative;
     background: var(--bg-elevated);
     border: 1px solid var(--border-subtle);
     border-radius: var(--radius-lg);
     box-shadow:
         var(--shadow-xl),
         0 0 0 1px rgba(14, 175, 251, 0.1),
         0 0 40px rgba(14, 175, 251, 0.08);
     max-width: min(1400px, 95vw);
     max-height: 92vh;
     width: 100%;
     display: grid;
     grid-template-rows: auto 1fr auto;
     overflow: hidden;
     transform: scale(0.95) translateY(20px);
     animation: modalSlideIn var(--transition-standard) ease-out forwards;
     isolation: isolate;
 }

 @keyframes modalSlideIn {
     from {
         transform: scale(0.95) translateY(20px);
         opacity: 0;
     }

     to {
         transform: scale(1) translateY(0);
         opacity: 1;
     }
 }

 /* ============================
   ðŸ“‹ Modal Header
============================ */

 .modalHeader {
     display: grid;
     grid-template-columns: 1fr auto auto;
     align-items: flex-start;
     gap: var(--spacing-md);
     padding: clamp(var(--spacing-md), 3vw, var(--spacing-lg));
     border-bottom: 1px solid var(--border-subtle);
     background: var(--bg-elevated);
     position: relative;
 }

 .headerContent {
     display: grid;
     gap: var(--spacing-xs);
     min-width: 0;
 }

 .modalTitle {
     font-family: var(--font-heading);
     font-weight: 700;
     font-size: clamp(var(--font-size-h4), 2.2vw, var(--font-size-h3));
     color: var(--text-accent);
     margin: 0;
     line-height: var(--line-height-heading);
     display: -webkit-box;
     -webkit-line-clamp: 2;
     -webkit-box-orient: vertical;
     overflow: hidden;
 }

 .modalSubtitle {
     font-family: var(--font-body);
     font-size: var(--font-size-small);
     color: var(--text-secondary);
     margin: 0;
     display: flex;
     align-items: center;
     gap: var(--spacing-xs);
 }

 .clientName {
     font-weight: 600;
     color: var(--text-primary);
 }

 .modalMeta {
     display: flex;
     align-items: center;
     gap: var(--spacing-sm);
     flex-wrap: wrap;
 }

 .counter {
     font-family: var(--font-body);
     font-size: var(--font-size-small);
     color: var(--text-tertiary);
     font-weight: 500;
     white-space: nowrap;
     padding: 4px 8px;
     background: var(--bg-surface);
     border-radius: var(--radius-sm);
 }

 .mediaTypeBadge {
     display: inline-flex;
     align-items: center;
     gap: 4px;
     padding: 4px 8px;
     background: var(--bg-surface);
     border: 1px solid var(--border-subtle);
     border-radius: var(--radius-sm);
     font-family: var(--font-body);
     font-size: var(--font-size-caption);
     font-weight: 600;
     white-space: nowrap;
 }

 .mediaTypeBadge[data-type="video"] {
     border-color: #FF6B6B;
     color: #FF6B6B;
     background: rgba(255, 107, 107, 0.1);
 }

 .mediaTypeBadge[data-type="interactive"] {
     border-color: var(--accent-primary);
     color: var(--accent-primary);
     background: rgba(14, 175, 251, 0.1);
 }

 .mediaTypeBadge[data-type="pdf"] {
     border-color: #96CEB4;
     color: #96CEB4;
     background: rgba(150, 206, 180, 0.1);
 }

 .mediaTypeBadge[data-type="image"] {
     border-color: #4ECDC4;
     color: #4ECDC4;
     background: rgba(78, 205, 196, 0.1);
 }

 .closeButton {
     display: flex;
     align-items: center;
     justify-content: center;
     width: 40px;
     height: 40px;
     background: var(--bg-surface);
     border: 1px solid var(--border-subtle);
     border-radius: var(--radius-md);
     color: var(--text-secondary);
     cursor: pointer;
     transition: var(--transition-fast);
     flex-shrink: 0;
 }

 .closeButton:hover {
     background: var(--bg-elevated);
     color: var(--text-primary);
     border-color: var(--border-accent);
     transform: scale(1.05);
 }

 .closeButton:focus {
     outline: 2px solid var(--accent-primary);
     outline-offset: 2px;
 }

 .closeButton:active {
     transform: scale(0.95);
 }

 .closeButton svg {
     width: 20px;
     height: 20px;
 }

 /* ============================
   ðŸŽ¬ Modal Content & Media Area
============================ */

 .modalContent {
     position: relative;
     overflow: hidden;
     display: flex;
     align-items: center;
     justify-content: center;
     background: var(--bg-primary);
     min-height: 400px;
 }

 /* Media Viewer Containers */
 .mediaViewer {
     width: 100%;
     height: 100%;
     min-height: inherit;
     display: flex;
     align-items: center;
     justify-content: center;
     position: relative;
 }

 /* Loading States */
 .loadingContainer {
     display: flex;
     flex-direction: column;
     align-items: center;
     justify-content: center;
     gap: var(--spacing-md);
     padding: var(--spacing-xl);
     color: var(--text-secondary);
 }

 .loadingSpinner {
     width: 40px;
     height: 40px;
     border: 3px solid var(--border-subtle);
     border-top: 3px solid var(--accent-primary);
     border-radius: 50%;
     animation: spin 1s linear infinite;
 }

 @keyframes spin {
     0% {
         transform: rotate(0deg);
     }

     100% {
         transform: rotate(360deg);
     }
 }

 .loadingText {
     font-family: var(--font-body);
     font-size: var(--font-size-small);
     color: var(--text-secondary);
     margin: 0;
     text-align: center;
 }

 /* Error States */
 .errorContainer {
     display: flex;
     flex-direction: column;
     align-items: center;
     justify-content: center;
     gap: var(--spacing-md);
     padding: var(--spacing-xl);
     text-align: center;
     color: var(--text-secondary);
 }

 .errorContainer h3 {
     font-family: var(--font-heading);
     font-size: var(--font-size-h4);
     color: var(--text-accent);
     margin: 0;
 }

 .errorContainer p {
     font-family: var(--font-body);
     font-size: var(--font-size-body);
     color: var(--text-secondary);
     margin: 0;
     max-width: 40ch;
 }

 .errorActions {
     display: flex;
     gap: var(--spacing-sm);
     flex-wrap: wrap;
     justify-content: center;
     margin-top: var(--spacing-sm);
 }

 /* ============================
   ðŸ“Š Modal Footer & Project Info
============================ */

 .modalFooter {
     display: grid;
     gap: clamp(var(--spacing-md), 2.5vw, var(--spacing-lg));
     padding: clamp(var(--spacing-md), 3vw, var(--spacing-lg));
     border-top: 1px solid var(--border-subtle);
     background: var(--bg-elevated);
 }

 .projectInfo {
     display: grid;
     gap: var(--spacing-md);
 }

 .modalDescription {
     font-family: var(--font-body);
     font-size: clamp(var(--font-size-body), 1.1vw, var(--font-size-lg));
     color: var(--text-primary);
     margin: 0;
     line-height: var(--line-height-body);
 }

 /* Project Metrics */
 .metrics {
     display: flex;
     gap: var(--spacing-md);
     flex-wrap: wrap;
 }

 .metric {
     display: flex;
     flex-direction: column;
     align-items: center;
     gap: var(--spacing-xs);
     padding: clamp(var(--spacing-sm), 2vw, var(--spacing-md));
     background: var(--bg-surface);
     border: 1px solid var(--border-subtle);
     border-radius: var(--radius-md);
     min-width: 80px;
     text-align: center;
 }

 .metricValue {
     font-family: var(--font-heading);
     font-weight: 700;
     font-size: clamp(var(--font-size-lg), 1.8vw, var(--font-size-xl));
     color: var(--accent-primary);
     margin: 0;
 }

 .metricLabel {
     font-family: var(--font-body);
     font-size: var(--font-size-caption);
     color: var(--text-secondary);
     margin: 0;
     text-align: center;
 }

 /* Project Tags */
 .tagsSection {
     display: grid;
     gap: var(--spacing-xs);
 }

 .tagsLabel {
     font-family: var(--font-heading);
     font-size: var(--font-size-small);
     font-weight: 600;
     color: var(--text-accent);
     margin: 0;
 }

 .tags {
     display: flex;
     gap: var(--spacing-xs);
     flex-wrap: wrap;
 }

 .tag {
     display: inline-flex;
     align-items: center;
     padding: 4px var(--spacing-sm);
     background: var(--bg-surface);
     color: var(--text-secondary);
     font-family: var(--font-body);
     font-size: var(--font-size-caption);
     font-weight: 500;
     border: 1px solid var(--border-subtle);
     border-radius: var(--radius-sm);
     transition: var(--transition-fast);
 }

 .tag:hover {
     background: var(--bg-elevated);
     border-color: var(--border-accent);
     color: var(--text-primary);
 }

 /* Project Links */
 .projectLinks {
     display: flex;
     gap: var(--spacing-sm);
     flex-wrap: wrap;
 }

 .projectLink {
     display: inline-flex;
     align-items: center;
     gap: var(--spacing-xs);
     padding: var(--spacing-sm) var(--spacing-md);
     background: var(--accent-primary);
     color: var(--text-inverse);
     text-decoration: none;
     border-radius: var(--radius-md);
     font-family: var(--font-heading);
     font-size: var(--font-size-small);
     font-weight: 600;
     transition: var(--transition-fast);
     border: 1px solid transparent;
 }

 .projectLink:hover {
     background: var(--accent-hover);
     transform: translateY(-1px);
     box-shadow: var(--shadow-sm);
 }

 .projectLink.secondary {
     background: var(--bg-surface);
     color: var(--accent-primary);
     border-color: var(--border-subtle);
 }

 .projectLink.secondary:hover {
     background: var(--bg-elevated);
     border-color: var(--accent-primary);
 }

 .projectLink svg {
     width: 16px;
     height: 16px;
 }

 /* ============================
   ðŸ§­ Navigation Controls
============================ */

 .navigation {
     display: flex;
     gap: var(--spacing-sm);
     justify-content: center;
     align-items: center;
     padding-top: var(--spacing-md);
     border-top: 1px solid var(--border-subtle);
 }

 .navButton {
     display: inline-flex;
     align-items: center;
     gap: var(--spacing-xs);
     padding: var(--spacing-sm) var(--spacing-md);
     background: var(--bg-surface);
     color: var(--text-primary);
     text-decoration: none;
     border: 1px solid var(--border-subtle);
     border-radius: var(--radius-md);
     font-family: var(--font-heading);
     font-size: var(--font-size-small);
     font-weight: 600;
     cursor: pointer;
     transition: var(--transition-fast);
     min-width: 100px;
     justify-content: center;
 }

 .navButton:hover:not(:disabled) {
     background: var(--bg-elevated);
     border-color: var(--accent-primary);
     color: var(--accent-primary);
     transform: translateY(-1px);
 }

 .navButton:disabled {
     opacity: 0.5;
     cursor: not-allowed;
 }

 .navButton svg {
     width: 16px;
     height: 16px;
 }

 .navInfo {
     display: flex;
     align-items: center;
     gap: var(--spacing-xs);
     font-family: var(--font-body);
     font-size: var(--font-size-small);
     color: var(--text-secondary);
     padding: 0 var(--spacing-md);
 }

 .navInfo kbd {
     display: inline-flex;
     align-items: center;
     justify-content: center;
     min-width: 20px;
     height: 20px;
     padding: 0 4px;
     background: var(--bg-surface);
     border: 1px solid var(--border-subtle);
     border-radius: 4px;
     font-family: var(--font-body);
     font-size: 10px;
     font-weight: 600;
     color: var(--text-tertiary);
 }

 /* ============================
   ðŸ“± Responsive Design
============================ */

 /* Large Desktop */
 @media (min-width: 1400px) {
     .modalContainer {
         max-width: 1600px;
     }

     .modalContent {
         min-height: 600px;
     }
 }

 /* Tablet */
 @media (max-width: 1024px) {
     .modalBackdrop {
         padding: var(--spacing-sm);
     }

     .modalContainer {
         max-height: 95vh;
     }

     .modalHeader {
         grid-template-columns: 1fr auto;
         gap: var(--spacing-sm);
     }

     .modalMeta {
         grid-column: 1 / -1;
         margin-top: var(--spacing-xs);
     }

     .modalContent {
         min-height: 350px;
     }

     .metrics {
         gap: var(--spacing-sm);
     }

     .metric {
         min-width: 70px;
         padding: var(--spacing-sm);
     }
 }

 /* Mobile */
 @media (max-width: 768px) {
     .modalBackdrop {
         padding: var(--spacing-xs);
         align-items: flex-start;
         padding-top: var(--spacing-sm);
     }

     .modalContainer {
         max-height: 98vh;
         max-width: 100%;
         width: 100%;
     }

     .modalHeader {
         padding: var(--spacing-md);
         grid-template-columns: 1fr auto;
     }

     .modalTitle {
         font-size: var(--font-size-h4);
     }

     .closeButton {
         width: 36px;
         height: 36px;
     }

     .closeButton svg {
         width: 18px;
         height: 18px;
     }

     .modalContent {
         min-height: 300px;
     }

     .modalFooter {
         padding: var(--spacing-md);
     }

     .metrics {
         gap: var(--spacing-xs);
         justify-content: center;
     }

     .metric {
         min-width: 60px;
         padding: var(--spacing-xs);
     }

     .metricValue {
         font-size: var(--font-size-lg);
     }

     .navigation {
         flex-direction: column;
         gap: var(--spacing-xs);
     }

     .navButton {
         width: 100%;
         min-width: auto;
     }

     .navInfo {
         order: -1;
         padding: 0;
     }

     .projectLinks {
         flex-direction: column;
     }

     .projectLink {
         justify-content: center;
     }
 }

 /* Small Mobile */
 @media (max-width: 480px) {
     .modalBackdrop {
         padding: 0;
         align-items: stretch;
     }

     .modalContainer {
         max-height: 100vh;
         height: 100vh;
         border-radius: 0;
         margin: 0;
     }

     .modalHeader {
         padding: var(--spacing-sm) var(--spacing-md);
     }

     .closeButton {
         width: 32px;
         height: 32px;
         background: rgba(6, 5, 18, 0.9);
         border-color: var(--border-accent);
     }

     .closeButton svg {
         width: 16px;
         height: 16px;
     }

     .modalContent {
         min-height: 250px;
     }

     .modalFooter {
         padding: var(--spacing-sm) var(--spacing-md);
     }

     .metrics {
         flex-direction: column;
         align-items: center;
     }

     .metric {
         width: 100%;
         flex-direction: row;
         justify-content: space-between;
         align-items: center;
         padding: var(--spacing-sm);
     }
 }

 /* ============================
   â™¿ Accessibility Features
============================ */

 .modalContainer:focus {
     outline: none;
 }

 .modalContainer:focus-visible {
     outline: 2px solid var(--accent-primary);
     outline-offset: -2px;
 }

 .closeButton:focus-visible,
 .navButton:focus-visible,
 .projectLink:focus-visible {
     outline: 2px solid var(--accent-primary);
     outline-offset: 2px;
 }

 /* High contrast mode support */
 @media (prefers-contrast: high) {
     .modalBackdrop {
         background: rgba(0, 0, 0, 0.95);
     }

     .modalContainer {
         border-width: 2px;
         border-color: var(--text-primary);
     }

     .closeButton,
     .navButton {
         border-width: 2px;
     }

     .mediaTypeBadge,
     .tag,
     .metric {
         border-width: 2px;
     }
 }

 /* Reduced motion support */
 @media (prefers-reduced-motion: reduce) {

     .modalBackdrop,
     .modalContainer {
         animation: none;
         opacity: 1;
         transform: none;
     }

     .closeButton,
     .navButton,
     .projectLink,
     .tag,
     .loadingSpinner {
         transition: none;
         animation: none;
     }

     .closeButton:hover,
     .navButton:hover,
     .projectLink:hover {
         transform: none;
     }

     .loadingSpinner {
         border-top-color: var(--accent-primary);
     }
 }

 /* ============================
   ðŸŽ¨ Featured Project Styling
============================ */

 .modalContainer[data-featured="true"] {
     border-color: var(--accent-primary);
     box-shadow:
         var(--shadow-xl),
         0 0 0 1px var(--accent-primary),
         0 0 40px rgba(14, 175, 251, 0.15);
 }

 .modalContainer[data-featured="true"]::before {
     content: '';
     position: absolute;
     top: 0;
     left: 0;
     right: 0;
     height: 3px;
     background: var(--accent-primary);
     z-index: 1;
 }

 /* ============================
   ðŸ”§ Safe Area Support (iOS)
============================ */

 @supports (padding: max(0px)) {
     .modalBackdrop {
         padding-top: max(var(--spacing-sm), env(safe-area-inset-top));
         padding-bottom: max(var(--spacing-sm), env(safe-area-inset-bottom));
         padding-left: max(var(--spacing-sm), env(safe-area-inset-left));
         padding-right: max(var(--spacing-sm), env(safe-area-inset-right));
     }

     @media (max-width: 480px) {
         .modalBackdrop {
             padding-top: env(safe-area-inset-top);
             padding-bottom: env(safe-area-inset-bottom);
             padding-left: env(safe-area-inset-left);
             padding-right: env(safe-area-inset-right);
         }
     }
 }