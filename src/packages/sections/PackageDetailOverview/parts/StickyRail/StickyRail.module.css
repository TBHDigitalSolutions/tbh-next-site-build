/* src/packages/sections/PackageDetailOverview/parts/StickyRail/StickyRail.module.css
/* src/packages/sections/PackageDetailOverview/parts/StickyRail/StickyRail.module.css
   Brand-aligned sticky right rail for Package detail pages.

   Consumes tokens from unified theme:
   - --header-offset, --z-sticky, --radius-xl, --accent-500, --surface-charcoal, shadows, etc.
   - You can override the top offset via the style prop: --sticky-top
*/

/* -------------------------- Sticky container ---------------------------- */
.wrap {
    /* Compute an effective top that respects header + safe areas */
    --_sticky-top: calc(var(--sticky-top, var(--header-offset, 1rem)) + env(safe-area-inset-top, 0px));

    position: sticky;
    inset-block-start: var(--_sticky-top);
    z-index: var(--z-sticky, 5);

    /* Prevent painting/overflow glitches while staying lightweight */
    contain: layout paint style;
    isolation: isolate;
    /* new stacking context for safe z-indexing */

    inline-size: 100%;
    max-block-size: calc(100dvb - var(--_sticky-top));
    /* prevent overscrolling off-screen */
    overflow: visible;

    /* Improve scroll behavior when inside scrollable parents */
    overscroll-behavior: contain;

    /* Let the card inside size fluidly; actual visuals live in the frame */
    background: transparent;
    color: inherit;
}

/* ----------------------------- Shell ----------------------------------- */
/* Creates a query container for the inner card and keeps layout fluid */
.shell {
    display: block;
    container-type: inline-size;

    /* Logical margins to align with main content rhythm when needed */
    margin-block: 0;
    margin-inline: 0;
}

/* ------------------------- Card frame visuals --------------------------- */
.cardFrame {
    /* “card on gradient” look */
    background: var(--surface-charcoal, #12141e);
    border: 1px solid var(--brand-accent, var(--accent-500, #0EAFFB));
    border-radius: var(--radius-xl, 20px);
    box-shadow: var(--shadow-lg, 0 20px 40px rgba(0, 0, 0, 0.35));
    overflow: clip;

    /* Ensure the card’s own frame uses tighter paddings nicely inside */
    display: block;
}

/* Small visual nudge so the rail separates from the left column */
@container (min-width: 62rem) {
    .cardFrame {
        transform: translateZ(0);
        /* prevent blurring from sticky compositing */
    }
}

/* --------------------------- Fallbacks ---------------------------------- */
@supports not (position: sticky) {
    .wrap {
        position: static;
        inset-block-start: auto;
        max-block-size: none;
    }
}

/* Disable sticky on narrow viewports; let it flow in the document */
@media (max-width: 980px) {
    .wrap {
        position: static;
        inset-block-start: auto;
        max-block-size: none;
    }
}

/* ------------------------ Accessibility --------------------------------- */
@media (forced-colors: active) {
    .wrap {
        border: none;
    }

    /* Ensure rail remains visible without extra chrome */
    .cardFrame {
        border-color: CanvasText;
        box-shadow: none;
    }
}

/* ---------------------- Motion / Print hygiene -------------------------- */
@media (prefers-reduced-motion: reduce) {

    .wrap,
    .shell {
        transition: none !important;
    }
}

@media print {
    .wrap {
        position: static !important;
        inset-block-start: auto !important;
        max-block-size: none !important;
    }
}