/* src/packages/components/PackageCard/PackageCard.module.css
   Brand-aligned, responsive, container-query enhanced.

   Notes
   - This styles the *inner* content only; the outer frame handles elevation,
     border, padding, focus (see PackageCardFrame.module.css).
   - Consumes tokens from packages-unified.module.css → unified-theme/root tokens.
*/

/* Base card content -------------------------------------------------------- */
.card {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm, 0.75rem);
    color: var(--pkg-card-fg, var(--text-primary));
    min-inline-size: 0;
    /* avoid overflow in grids */
}

/* Optional density tweak when used in rails/carousels */
.cardRail {
    gap: var(--spacing-xs, 0.5rem);
}

/* Emphasis (e.g., “Most popular”); the frame will read these vars */
.cardHighlight {
    --package-selected: var(--package-selected, var(--card-selected));
}

/* Header / media ---------------------------------------------------------- */
.header {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: start;
    gap: var(--spacing-sm, 0.75rem);
}

.media {
    position: relative;
    grid-column: 1 / -1;
    display: grid;
    align-items: center;
}

/* Responsive media — prefers aspect-ratio to fixed height */
.cardImage {
    inline-size: 100%;
    aspect-ratio: 16 / 9;
    object-fit: cover;
    border-radius: calc(var(--radius-lg, 12px) - 6px);
    background: var(--pkg-card-media-bg, color-mix(in oklab, var(--bg-surface) 80%, black));
}

/* Icon fallback if no image */
.iconFallback {
    display: inline-grid;
    place-items: center;
    inline-size: clamp(48px, 10cqw, 72px);
    block-size: clamp(48px, 10cqw, 72px);
    border-radius: var(--radius-md, 8px);
    background: var(--pkg-card-media-bg, color-mix(in oklab, var(--bg-surface) 80%, black));
}

/* Badges ------------------------------------------------------------------ */
.badge,
.savingsBadge {
    position: absolute;
    inset-block-start: 10px;
    border-radius: 999px;
    padding: 4px 10px;
    font: 800 var(--font-size-caption, 0.8rem)/1 var(--font-body, Newsreader, serif);
    letter-spacing: 0.02em;
    white-space: nowrap;
    user-select: none;
}

.badge {
    inset-inline-start: 10px;
    background: var(--pkg-badge-bg, color-mix(in oklab, var(--brand-blue) 12%, var(--bg-surface)));
    color: var(--pkg-badge-fg, var(--brand-blue));
    border: 1px solid color-mix(in oklab, var(--brand-blue) 28%, var(--card-border, var(--border-subtle)));
}

.savingsBadge {
    inset-inline-end: 10px;
    background: var(--pkg-savings-bg, color-mix(in oklab, #16a34a 18%, var(--bg-surface)));
    color: var(--pkg-savings-fg, #16a34a);
    border: 1px solid color-mix(in oklab, #16a34a 32%, var(--card-border, var(--border-subtle)));
}

/* Title bar --------------------------------------------------------------- */
.titleBar {
    display: grid;
    gap: var(--spacing-2xs, 0.25rem);
}

.title {
    margin: 0;
    font-family: var(--font-heading, Aldrich, sans-serif);
    font-size: var(--font-size-h3, var(--pkg-h3, clamp(1.25rem, 1.1vw + 0.7rem, 1.5rem)));
    color: var(--pkg-card-title, var(--text-primary));
    line-height: 1.2;
    text-wrap: balance;
}

/* Copy -------------------------------------------------------------------- */
.description {
    margin: 0;
    color: var(--pkg-card-muted, var(--text-secondary));
    font-size: var(--font-size-body, var(--pkg-body, 1rem));
    text-wrap: pretty;
}

/* Value row: teaser + highlights ----------------------------------------- */
.value {
    display: grid;
    gap: var(--spacing-sm, 0.75rem);
}

.priceDisplay {
    display: inline-grid;
    grid-auto-flow: column;
    align-items: baseline;
    gap: 0.5ch;
    font-weight: 700;
    color: var(--text-primary);
}

.features {
    display: grid;
    gap: var(--spacing-2xs, 0.25rem);
}

.more {
    margin-top: 2px;
    color: var(--text-secondary);
    font-size: var(--font-size-small, 0.875rem);
}

/* Detailed price chip ----------------------------------------------------- */
.prices {
    margin-top: var(--spacing-sm, 0.75rem);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs, 0.5rem);
    flex-wrap: wrap;
}

.priceChip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-radius: 9999px;
    border: 1px solid var(--card-border, var(--border-subtle));
    background: var(--pkg-pricechip-bg, var(--chip-price-bg, #2D2D2F));
    color: var(--pkg-pricechip-fg, var(--chip-price-fg, var(--pkg-card-fg)));
    font-size: var(--font-size-small, 0.875rem);
}

/* Tags -------------------------------------------------------------------- */
.tagsWrap {
    margin-top: 8px;
}

/* Actions (Buttons are separate component; we only handle spacing) -------- */
.actions {
    margin-top: var(--spacing-md, 1rem);
    display: flex;
    align-items: center;
    gap: var(--spacing-sm, 0.75rem);
    flex-wrap: wrap;
}

/* Footnote --------------------------------------------------------------- */
.footerNote {
    margin-top: var(--spacing-sm, 0.75rem);
    color: var(--text-secondary);
    font-size: var(--font-size-small, 0.875rem);
}

/* ------------------------ Modern responsiveness ------------------------- */
/* Container queries: the frame sets container-type: inline-size */
@container (min-width: 420px) {
    .title {
        font-size: clamp(1.3rem, 1.2cqi + 1rem, 1.6rem);
    }

    .cardImage {
        aspect-ratio: 3 / 2;
    }
}

@container (min-width: 640px) {
    .title {
        font-size: clamp(1.4rem, 1.2cqi + 1rem, 1.8rem);
    }

    .actions {
        justify-content: start;
    }
}

/* Motion preferences */
@media (prefers-reduced-motion: reduce) {

    .priceChip,
    .badge,
    .savingsBadge {
        transition: none !important;
    }
}