/* src/packages/components/PackageCard/PackageCard.module.css
   ─ Enforces rules for titles, summary/description, tags, price, CTAs
   ─ Uses container queries for content-aware responsiveness
   ─ Routes color/type through unified theme tokens (with sensible fallbacks)
*/

/* ============================= Root card ============================== */
.card {
    /* Enable container queries for children */
    container-type: inline-size;

    display: grid;
    gap: var(--space-4, 1rem);
    color: var(--text-primary, #e6eaee);
    background: transparent;
    min-inline-size: 0;
    /* prevent overflow in rails */
}

.cardHighlight {
    outline: 1px solid color-mix(in oklab, var(--brand-blue, var(--accent-500, #0EAFFB)) 40%, transparent);
    box-shadow: 0 1px 0 color-mix(in oklab, var(--brand-blue, var(--accent-500, #0EAFFB)) 20%, transparent);
}

.cardRail {
    gap: var(--space-3, .75rem);
}

.cardPinned {
    /* tighter stack in pinned-compact */
    gap: var(--space-3, .75rem);
}

/* ================================ Header ============================== */
.header {
    display: grid;
    gap: var(--space-3, .75rem);
}

.media {
    position: relative;
    display: grid;
    place-items: center;
    min-inline-size: 0;
    min-block-size: 56px;
}

.cardImage {
    inline-size: 100%;
    max-inline-size: 460px;
    block-size: auto;
    border-radius: var(--radius-lg, .75rem);
    display: block;
    object-fit: cover;
}

.iconFallback {
    display: inline-grid;
    place-items: center;
    inline-size: 3rem;
    block-size: 3rem;
    border-radius: var(--radius-lg, .75rem);
    background: color-mix(in oklab, var(--brand-blue, var(--accent-500, #0EAFFB)) 12%, transparent);
}

.badge {
    position: absolute;
    inset-block-start: .5rem;
    inset-inline-end: .5rem;
    padding: .25rem .5rem;
    border-radius: 999px;
    background: color-mix(in oklab, var(--brand-blue, var(--accent-500, #0EAFFB)) 12%, transparent);
    border: 1px solid color-mix(in oklab, var(--brand-blue, var(--accent-500, #0EAFFB)) 45%, transparent);
    font-weight: 600;
    font-size: .75rem;
    letter-spacing: .02em;
}

/* Title + Divider + Summary are grouped for consistent rhythm */
.titleWrap {
    display: grid;
    gap: var(--space-2, .5rem);
    justify-items: center;
    /* center title + divider */
    text-align: center;
    min-inline-size: 0;
}

.title {
    margin: 0;
    font: 700 clamp(1rem, 1.2cqi + .75rem, 1.25rem) var(--font-heading, var(--font-sans, ui-sans-serif));
    line-height: 1.2;

    /* Single-line only with graceful ellipsis */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.summary {
    margin: 0;
    text-align: left;
    /* summary reads as body copy */
    color: var(--text-secondary, #c9ced1);
    font: 500 clamp(.95rem, .6cqi + .9rem, 1.05rem) var(--font-body, var(--font-sans, ui-sans-serif));
}

.summaryClamp {
    display: -webkit-box;
    -webkit-line-clamp: var(--summary-lines, 3);
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* ============================ Description ============================ */
.descriptionSection {
    display: grid;
}

.description {
    margin: 0;
    text-align: left;
    color: var(--text-secondary, #c9ced1);
    font: 400 clamp(.95rem, .5cqi + .9rem, 1.0625rem) var(--font-body, var(--font-sans, ui-sans-serif));
    line-height: 1.55;
}

/* ============================== Features ============================= */
.featuresSection {
    display: grid;
}

.features {
    display: grid;
    gap: .25rem;
    justify-items: center;
    /* center the ul but keep text left */
}

.features :is(ul, ol) {
    margin: 0;
    padding: 0;
    list-style: none;
    text-align: left;
}

.more {
    color: var(--text-secondary, #c9ced1);
    font-size: .875rem;
}

/* ================================= Tags ============================== */
.tagsWrap {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: max-content;
    gap: .375rem;

    /* One row only; allow scroll if overflow */
    overflow-x: auto;
    overscroll-behavior-inline: contain;
    scrollbar-width: thin;
}

.tagsWrap * {
    flex-wrap: nowrap !important;
}

/* =========================== Legacy price row ======================== */
.priceRow {
    /* Legacy one-liner (startingAtLabel) */
    color: var(--text-primary, #e6eaee);
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: center;

    padding-block: .25rem;
    border-radius: var(--radius-md, 10px);
    background: color-mix(in oklab, var(--brand-blue, var(--accent-500, #0EAFFB)) 8%, transparent);
}

/* ============================= Price band slot ======================= */
/* When rendering PriceActionsBand on cards, we just control spacing here */
.priceArea {
    padding-block: .25rem .25rem;
}

/* =============================== Actions ============================= */
.actionsDivider {
    margin-block-start: .25rem;
    /* not used on pinned per policy; harmless otherwise */
}

.actions {
    display: grid;
    grid-template-columns: var(--cta-cols, 1fr 1fr);
    gap: .5rem;
    align-items: center;
    min-inline-size: 0;
}

.actionsTwo {
    --cta-cols: 1fr 1fr;
}

.actionsOne {
    --cta-cols: 1fr;
    justify-items: center;
}

.actions>* {
    min-inline-size: 0;
}

/* ============================== Footnote ============================= */
.footerNote {
    color: var(--text-secondary, #c9ced1);
    font-size: .875rem;
    line-height: 1.35;
    margin-block-start: var(--space-2, .5rem);
}

/* ========================= Container responsiveness ================== */
@container (min-width: 440px) {
    .card {
        gap: var(--space-5, 1.25rem);
    }

    .title {
        font-size: clamp(1.125rem, .9cqi + 1rem, 1.35rem);
    }

    .summary {
        font-size: clamp(1rem, .8cqi + .95rem, 1.125rem);
    }

    .description {
        font-size: clamp(1rem, .7cqi + .95rem, 1.125rem);
    }

    .priceRow {
        font-size: clamp(1.0625rem, .9cqi + 1rem, 1.2rem);
    }
}

@container (min-width: 620px) {
    .card {
        gap: var(--space-6, 1.5rem);
    }
}

/* ========================== Accessibility modes ====================== */
@media (forced-colors: active) {
    .badge {
        background: ButtonFace;
        color: ButtonText;
        border-color: ButtonText;
    }

    .priceRow {
        background: Canvas;
        color: CanvasText;
    }
}

/* ============================== No motion ============================ */
@media (prefers-reduced-motion: reduce) {
    .card * {
        transition: none !important;
    }
}